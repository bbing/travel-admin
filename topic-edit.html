<!doctype html>
<html>
<head>
	<title>专题-BETALABS</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no" />
	<meta http-equiv="Cache-Control" content="max-age=0" />
	<meta name="apple-touch-fullscreen" content="yes" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta name="Description" content="BETALABS" />
	<meta name="Keywords" content="BETALABS" />
	<!--[if lte IE 6]>
	<script>window.location.href='notsupported/';</script>
	<![endif]-->
	<link href="assets/css/bootstrap.min.css" rel="stylesheet" />
	<link rel="stylesheet" href="assets/css/font-awesome.min.css" />
	<!--[if IE 7]>
	<link rel="stylesheet" href="assets/css/font-awesome-ie7.min.css" />
	<![endif]-->
	<link rel="stylesheet" href="assets/css/ace-fonts.css" />
	<link rel="stylesheet" href="assets/css/ace.min.css" />
	<link rel="stylesheet" href="assets/css/ace-rtl.min.css" />
	<link rel="stylesheet" href="assets/css/ace-skins.min.css" />

	<!--[if lte IE 8]>
	<link rel="stylesheet" href="assets/css/ace-ie.min.css" />
	<![endif]-->

	<script src="assets/js/ace-extra.min.js"></script>
	<!--[if lt IE 9]>
	<script src="assets/js/html5shiv.js"></script>
	<script src="assets/js/respond.min.js"></script>
	<![endif]-->
	<!-- 以上部分不可修改 -->
	<link rel="stylesheet" href="assets/css/mod.base.css" />

	<link rel="stylesheet" href="assets/css/daterangepicker.css" />
</head>

<body>
	<div class="navbar navbar-default" id="navbar">
		<div class="navbar-container" id="navbar-container">
			<div class="navbar-header pull-left">
				<a href="./" class="">
					<small>
						<img src="assets/img/logo_small.png" alt="" />
					</small>
				</a>
				<!-- /.brand -->
			</div>
			<!-- /.navbar-header -->

			<div class="navbar-header pull-right" role="navigation">
				<ul class="nav ace-nav">
					<li >
						<a data-toggle="dropdown" href="javascript:;" class="dropdown-toggle">
							<span class="user-info">周晓通</span> <i class="icon-caret-down"></i>
						</a>

						<ul class="user-menu pull-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">
							<li>
								<a href="#"> <i class="icon-lock"></i>
									修改密码
								</a>
							</li>

							<li class="divider"></li>

							<li>
								<a href="#">
									<i class="icon-off"></i>
									退出
								</a>
							</li>
						</ul>
					</li>
				</ul>
				<!-- /.ace-nav -->
			</div>
			<!-- /.navbar-header -->
		</div>
		<!-- /.container -->
	</div>

	<div class="main-container" id="main-container">
		<div class="main-container-inner">
			<a class="menu-toggler" id="menu-toggler" href="#">
				<span class="menu-text"></span>
			</a>
			<div class="sidebar" id="sidebar">
				<ul class="nav nav-list">
					<li>
						<a href="index.html">
							<i class="icon-dashboard"></i>
							<span class="menu-text">欢迎页</span>
						</a>
					</li>
					<li>
						<a href="javascript:;" class="dropdown-toggle">
							<i class="icon-book"></i>
							<span class="menu-text">玩法</span> <b class="arrow icon-angle-down"></b>
						</a>
						<ul class="submenu">
							<li >
								<a href="play.html">
									<i class="icon-double-angle-right"></i>
									全部玩法
								</a>
							</li>
							<li>
								<a href="car.html">
									<i class="icon-double-angle-right"></i>
									租车服务
								</a>
							</li>
							<li>
								<a href="stay.html">
									<i class="icon-double-angle-right"></i>
									客栈住宿
								</a>
							</li>
							<li>
								<a href="lock.html">
									<i class="icon-double-angle-right"></i>
									被锁定
								</a>
							</li>
						</ul>
					</li>

					<li>
						<a href="javascript:;" class="dropdown-toggle">
							<i class="icon-user"></i>
							<span class="menu-text">用户</span> <b class="arrow icon-angle-down"></b>
						</a>
						<ul class="submenu">
							<li>
								<a href="user-all.html">
									<i class="icon-double-angle-right"></i>
									全部用户
								</a>
							</li>
							<li>
								<a href="user-check.html">
									<i class="icon-double-angle-right"></i>
									待审核
								</a>
							</li>
							<li>
								<a href="user-lock.html">
									<i class="icon-double-angle-right"></i>
									被锁定
								</a>
							</li>
						</ul>
					</li>
					<li>
						<a href="javascript:;" class="dropdown-toggle">
							<i class="icon-exclamation-sign"></i>
							<span class="menu-text">意见反馈&举报</span>
							<b class="arrow icon-angle-down"></b>
						</a>
						<ul class="submenu">
							<li>
								<a href="opinion.html">
									<i class="icon-double-angle-right"></i>
									意见反馈
								</a>
							</li>
							<li>
								<a href="report.html">
									<i class="icon-double-angle-right"></i>
									举报
								</a>
							</li>
						</ul>
					</li>
					<li class="active">
						<a href="javascript:;" class="dropdown-toggle">
							<i class="icon-home"></i>
							<span class="menu-text">首页数据</span>
							<b class="arrow icon-angle-down"></b>
						</a>
						<ul class="submenu">
							<li class="active">
								<a href="topic.html">
									<i class="icon-double-angle-right"></i>
									专题
								</a>
							</li>
							<li>
								<a href="play-suggest.html">
									<i class="icon-double-angle-right"></i>
									推荐玩法
								</a>
							</li>
							<li>
								<a href="user-suggest.html">
									<i class="icon-double-angle-right"></i>
									推荐地主
								</a>
							</li>
							<li>
								<a href="ads.html">
									<i class="icon-double-angle-right"></i>
									广告
								</a>
							</li>
						</ul>
					</li>
					<li>
						<a href="javascript:;" class="dropdown-toggle">
							<i class="icon-hdd"></i>
							<span class="menu-text">内容</span>
							<b class="arrow icon-angle-down"></b>
						</a>
						<ul class="submenu">
							<li>
								<a href="play-cate.html">
									<i class="icon-double-angle-right"></i>
									玩法分类
								</a>
							</li>
							<li>
								<a href="user-special.html">
									<i class="icon-double-angle-right"></i>
									地主特长
								</a>
							</li>
							<li>
								<a href="user-cate.html">
									<i class="icon-double-angle-right"></i>
									地主分类
								</a>
							</li>
						</ul>
					</li>
					<li>
						<a href="javascript:;" class="dropdown-toggle">
							<i class="icon-cog"></i>
							<span class="menu-text">系统设置</span>
							<b class="arrow icon-angle-down"></b>
						</a>
						<ul class="submenu">
							<li>
								<a href="account.html">
									<i class="icon-double-angle-right"></i>
									帐号管理
								</a>
							</li>
							<li>
								<a href="log.html">
									<i class="icon-double-angle-right"></i>
									查看日志
								</a>
							</li>
						</ul>
					</li>
				</ul>
				<!-- /.nav-list -->

				<div class="sidebar-collapse" id="sidebar-collapse">
					<i class="icon-double-angle-left" data-icon1="icon-double-angle-left" data-icon2="icon-double-angle-right"></i>
				</div>
			</div>

			<div class="main-content">

				<div class="page-content">
					<div class="page-header">
						<h1>
							首页数据
							<small>
								<i class="icon-double-angle-right"></i>
								专题
							</small>
						</h1>
					</div>
					<div class="widget-box">
						<div class="widget-header">
							<h4 class="smaller">
								<a href="javascript:;"  class="btn btn-success btn-sm tooltip-info J_save">
									<i class="icon-save"></i>
									保存
								</a>
								<a href="topic.html"  class="ui-ml10 btn btn-sm tooltip-info">
									<i class="icon-remove"></i>
									取消
								</a>
							</h4>
						</div>

						<div class="widget-body">
							<div class="widget-main">
								<ul class="J_topic list-inline">
									<li class="J_pick">
										<p class="text-center">点击添加</p>
									</li>
									<li class="J_pick">
										<p class="text-center">点击添加</p>
									</li>
									<li class="J_pick">
										<p class="text-center">点击添加</p>
									</li>
									<li class="J_pick">
										<p class="text-center">点击添加</p>
									</li>
								</ul>
							</div>
						</div>
					</div>

				</div>
				<!-- /.page-content -->
			</div>
			<!-- /.main-content -->

		</div>
		<!-- /.main-container-inner -->

		<a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
			<i class="icon-double-angle-up icon-only bigger-110"></i>
		</a>
	</div>
	<!-- /.main-container -->
	<div class="modal fade" id="picktopic" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<h4 class="modal-title text-center" id="myModalLabel">添加到专题</h4>
				</div>
				<div class="modal-body">
					<div class="table-responsive">

						<table class="table table-striped table-bordered table-hover dataTable">
							<thead>
								<tr>
									<th width="6%"></th>
									<th>序号</th>
									<th>专题图片</th>
									<th>名称</th> 
								</tr>
							</thead>
							<tbody class="J_topiclist">
								<tr data-id="01" data-select="0">
									<td></td>
									<td>01</td>
									<td>
										<img src="assets/img/playpic1.jpg" class="play-cover img-thumbnail"></td>
									<td>
										专题名称
									</td>
								</tr>
								<tr data-id="02" data-select="0">
									<td></td>
									<td>02</td>
									<td>
										<img src="assets/img/playpic2.jpg" class="play-cover img-thumbnail"></td>
									<td>
										专题名称
									</td>
								</tr>
								<tr data-id="03" data-select="0">
									<td></td>
									<td>02</td>
									<td>
										<img src="assets/img/playpic3.jpg" class="play-cover img-thumbnail"></td>
									<td>
										专题名称
									</td>
								</tr>
								<tr data-id="04" data-select="0">
									<td></td>
									<td>02</td>
									<td>
										<img src="assets/img/playpic4.jpg" class="play-cover img-thumbnail"></td>
									<td>
										专题名称
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" id="J_addbtn">确定</button>
					<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
					
				</div>
			</div>
		</div>
	</div>

	<script src="assets/js/jquery.js"></script>
	<script>
	if("ontouchend" in document) document.write("<script src='assets/js/jquery.mobile.js'>"+"<"+"/script>");</script>
<script src="assets/js/plug.base.js"></script>
<script src="assets/js/mod.base.js"></script>
<script type="text/javascript"> 
	$(function(){
		 $(".J_topic").on("click", ".J_pick",function(){
		 	$(this).addClass("selected");
		 	$('#picktopic').modal('show');
		 });

		 //列表点击选中
		$("body").on("click", ".J_topiclist tr",function(e){
			e.preventDefault(); 
			var data_select = $(this).attr("data-select");
			if (data_select==1) {
				$(this).attr("data-select", 0);
				$(this).children("td").eq(0).html("");
			} else {
				$(this).attr("data-select", 1);
				$(this).children("td").eq(0).html("<i class='icon-ok green'></i>");
				$(this).siblings("tr").each(function(){
					$(this).attr("data-select", 0);
					$(this).children("td").eq(0).html("");
				});
			}
		});

		//确定添加
		$("body").on("click", "#J_addbtn", function(e){
			e.preventDefault(); 
			var selectDom = $(".J_topiclist tr[data-select=1]");
			if (selectDom.length==1) {
				var data_id = selectDom.attr('data-id');
				var pic_path = selectDom.children("td").eq(2).find("img").attr("src");
				$(".J_pick").filter(".selected").attr('data-id', data_id);
				$(".J_pick").filter(".selected").html('<img src="'+pic_path+'" class="topic_picked img-thumbnail" /><i class="icon-remove-sign  orange picked_remove"></i>');
				$(".J_pick").filter(".selected").attr("class", "picked");
			} else {
				$(".J_pick").filter(".selected").removeClass("selected");
			}
			$('#picktopic').modal('hide');
		});

		//删除
		$("body").on("click", ".picked_remove", function(e){
			e.preventDefault(); 
			var dom = $(this).parent("li");
			dom.attr("class", "J_pick").html('<p class="text-center">点击添加</p>');
		});

		//保存
		$(".J_save").on("click", function(){
			var selected = $(".J_topic li[class='picked']");
			if (selected.length <4) {
				bootbox.dialog({
					message: "<span class='bigger-110'>必须全部添加</span>",
					buttons: 			
					{
						"button" :
						{
							"label" : "我知道了",
							"className" : "btn-sm"
						}
					}
				}); 
				return false;
			}
			var ids = [];
			selected.each(function(){
				ids.push($(this).attr("data-id"));
			});
			//保存数据
			$.post('...',{ids:ids.join(",")}, function(data){
				if (data.status==0) {

				} else {
					bootbox.dialog({
						message: "<span class='bigger-110'>失败</span>",
						buttons: 			
						{
							"button" :
							{
								"label" : "我知道了",
								"className" : "btn-sm"
							}
						}
					}); 
				}
			});

		})
	})
</script>
</body>
</html>